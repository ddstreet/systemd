From: Yu Watanabe <watanabe.yu+github@gmail.com>
Date: Wed, 18 Jul 2018 13:06:34 +0900
Subject: network: simplify link_free()

(cherry picked from commit 0ade014c8b74d702130132b2833a67ab29c1689a)
---
 src/network/networkd-link.c | 9 ++++-----
 1 file changed, 4 insertions(+), 5 deletions(-)

diff --git a/src/network/networkd-link.c b/src/network/networkd-link.c
index 4afcf84..bc5d72a 100644
--- a/src/network/networkd-link.c
+++ b/src/network/networkd-link.c
@@ -497,14 +497,13 @@ static void link_free(Link *link) {
         if (!link)
                 return;
 
-        while (!set_isempty(link->addresses))
-                address_free(set_first(link->addresses));
+        while ((address = set_first(link->addresses)))
+                address_free(address);
 
-        while (!set_isempty(link->addresses_foreign))
-                address_free(set_first(link->addresses_foreign));
+        while ((address = set_first(link->addresses_foreign)))
+                address_free(address);
 
         link->addresses = set_free(link->addresses);
-
         link->addresses_foreign = set_free(link->addresses_foreign);
 
         while ((address = link->pool_addresses)) {
