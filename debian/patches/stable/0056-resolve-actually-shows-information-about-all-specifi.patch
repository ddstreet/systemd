From de5826c5b3d02b801810913b40a1090b04105127 Mon Sep 17 00:00:00 2001
From: Yu Watanabe <watanabe.yu+github@gmail.com>
Date: Tue, 20 Mar 2018 18:11:39 +0900
Subject: [PATCH] resolve: actually shows information about all specified
 interfaces

(cherry picked from commit 2892077c937f85a019fcb3bdbcd4433f2e373274)
---
 src/resolve/resolve-tool.c | 6 +++---
 1 file changed, 3 insertions(+), 3 deletions(-)

diff --git a/src/resolve/resolve-tool.c b/src/resolve/resolve-tool.c
index fce86d1e74..d7515721b6 100644
--- a/src/resolve/resolve-tool.c
+++ b/src/resolve/resolve-tool.c
@@ -2398,11 +2398,11 @@ int main(int argc, char **argv) {
                         STRV_FOREACH(ifname, argv + optind) {
                                 int ifindex, q;
 
-                                q = parse_ifindex(argv[optind], &ifindex);
+                                q = parse_ifindex(*ifname, &ifindex);
                                 if (q < 0) {
-                                        ifindex = if_nametoindex(argv[optind]);
+                                        ifindex = if_nametoindex(*ifname);
                                         if (ifindex <= 0) {
-                                                log_error_errno(errno, "Failed to resolve interface name: %s", argv[optind]);
+                                                log_error_errno(errno, "Failed to resolve interface name '%s': %m", *ifname);
                                                 continue;
                                         }
                                 }
-- 
2.17.0

