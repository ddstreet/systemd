From: Balint Reczey <balint.reczey@canonical.com>
Date: Fri, 4 Oct 2019 13:46:17 +0200
Subject: Ubuntu: test UseDomains=true default setting

---
 test/networkd-test.py | 6 ++++++
 1 file changed, 6 insertions(+)

diff --git a/test/networkd-test.py b/test/networkd-test.py
index 8b1aeed..84ff1ee 100755
--- a/test/networkd-test.py
+++ b/test/networkd-test.py
@@ -795,6 +795,12 @@ Domains= ~company ~lab''')
             self.print_server_log()
             raise
 
+    def test_dhcp_search_domains(self):
+        self.create_iface(dnsmasq_opts=['--domain=example.com'])
+        self.do_test(coldplug=None)
+        out = subprocess.check_output(['resolvectl', 'domain'])
+        self.assertIn(b'example.com', out)
+
 
 class NetworkdClientTest(ClientTestBase, unittest.TestCase):
     '''Test networkd client against networkd server'''
