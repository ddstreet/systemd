From: Susant Sahani <susant@redhat.com>
Date: Mon, 9 Jul 2018 11:10:54 +0530
Subject: Networkd: Start DHCP server when link is up.

Closes #9479

(cherry picked from commit 708c425d0aeda659d430f437163587babb96b1bb)
---
 src/network/networkd-link.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/src/network/networkd-link.c b/src/network/networkd-link.c
index 602e03f..5975ebc 100644
--- a/src/network/networkd-link.c
+++ b/src/network/networkd-link.c
@@ -1096,7 +1096,7 @@ static int link_enter_set_addresses(Link *link) {
 
         /* now that we can figure out a default address for the dhcp server,
            start it */
-        if (link_dhcp4_server_enabled(link)) {
+        if (link_dhcp4_server_enabled(link) && (link->flags & IFF_UP)) {
                 Address *address;
                 Link *uplink = NULL;
                 bool acquired_uplink = false;
