<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>systemd-nspawn</title><meta name="generator" content="DocBook XSL Stylesheets V1.76.1"/></head><body><div class="refentry" title="systemd-nspawn"><a id="systemd-nspawn"/><div class="titlepage"/><div class="refnamediv"><h2>Name</h2><p>systemd-nspawn â€” Spawn a namespace container for debugging, testing and building</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="cmdsynopsis"><p><code class="command">systemd-nspawn [OPTIONS...]  [COMMAND]  [ARGS...]</code> </p></div></div><div class="refsect1" title="Description"><a id="id385164"/><h2>Description</h2><p><span class="command"><strong>systemd-nspawn</strong></span> may be used to
                run a command or OS in a light-weight namespace
                container. In many ways it is similar to
                <span class="citerefentry"><span class="refentrytitle">chroot</span>(1)</span>,
                but more powerful since it fully virtualizes the file
                system hierachy, as well as the process tree, the
                various IPC subsystems and the host and domain
                name.</p><p><span class="command"><strong>systemd-nspawn</strong></span> limits access
                to various kernel interfaces in the container to
                read-only, such as <code class="filename">/sys</code>,
                <code class="filename">/proc/sys</code> or
                <code class="filename">/selinux</code>. Network interfaces and
                the system clock may not be changed from within the
                container. Device nodes may not be created. The host
                system cannot be rebooted and kernel modules may not
                be loaded from within the container.</p><p>Note that even though these security precautions
                are taken <span class="command"><strong>systemd-nspawn</strong></span> is not
                suitable for secure container setups. Many of the
                security features may be circumvented and are hence
                primarily useful to avoid accidental changes to the
                host system from the container. The intended use of
                this program is debugging and testing as well as
                building of packages, distributions and software
                involved with boot and systems management.</p><p>In contrast to
                <span class="citerefentry"><span class="refentrytitle">chroot</span>(1)</span>
                <span class="command"><strong>systemd-nspawn</strong></span> may be used to boot
                full Linux-based operating systems in a
                container.</p><p>Use a tool like
                <span class="citerefentry"><span class="refentrytitle">debootstrap</span>(8)</span> or <span class="citerefentry"><span class="refentrytitle">mock</span>(1)</span>
                to set up an OS directory tree suitable as file system
                hierarchy for <span class="command"><strong>systemd-nspawn</strong></span> containers.</p><p>Note that <span class="command"><strong>systemd-nspawn</strong></span> will
                mount file systems private to the container to
                <code class="filename">/dev</code>,
                <code class="filename">/run</code> and similar. These will
                not be visible outside of the container, and their
                contents will be lost when the container exits.</p><p>Note that running two
                <span class="command"><strong>systemd-nspawn</strong></span> containers from the
                same directory tree will not make processes in them
                see each other. The PID namespace seperation of the
                two containers is complete and the containers will
                share very few runtime objects except for the
                underlying file system.</p></div><div class="refsect1" title="Options"><a id="id352662"/><h2>Options</h2><p>If no arguments are passed the container is set
                up and a shell started in it, otherwise the passed
                command and arguments are executed in it. The
                following options are understood:</p><div class="variablelist"><dl><dt><span class="term"><code class="option">--help</code></span></dt><dd><p>Prints a short help
                                text and exits.</p></dd><dt><span class="term"><code class="option">--directory=</code>, </span><span class="term"><code class="option">--D</code></span></dt><dd><p>Directory to use as
                                file system root for the namespace
                                container. If omitted the current
                                directory will be
                                used.</p></dd></dl></div></div><div class="refsect1" title="Example 1"><a id="id352708"/><h2>Example 1</h2><pre class="programlisting"># debootstrap --arch=amd64 unstable debian-tree/
# systemd-nspawn -D debian-tree/</pre><p>This installs a minimal Debian unstable
                distribution into the directory
                <code class="filename">debian-tree/</code> and then spawns a
                shell in a namespace container in it.</p></div><div class="refsect1" title="Example 2"><a id="id352731"/><h2>Example 2</h2><pre class="programlisting"># mock --init
# systemd-nspawn -D /var/lib/mock/fedora-rawhide-x86_64/root/ /bin/systemd systemd.log_level=debug</pre><p>This installs a minimal Fedora distribution into
                a subdirectory of <code class="filename">/var/lib/mock/</code>
                and then boots an OS in a namespace container in it,
                with systemd as init system, configured for debug
                logging.</p></div><div class="refsect1" title="Exit status"><a id="id352756"/><h2>Exit status</h2><p>The exit code of the program executed in the
                container is returned.</p></div><div class="refsect1" title="See Also"><a id="id352840"/><h2>See Also</h2><p>
                        <span class="citerefentry"><span class="refentrytitle">systemd</span>(1)</span>,
                        <span class="citerefentry"><span class="refentrytitle">chroot</span>(1)</span>,
                        <span class="citerefentry"><span class="refentrytitle">debootstrap</span>(8)</span>
                        <span class="citerefentry"><span class="refentrytitle">mock</span>(1)</span>
                </p></div></div></body></html>
